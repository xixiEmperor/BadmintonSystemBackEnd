### åœºåœ°çŠ¶æ€è®¡ç®—å’Œæ˜ å°„è¯¦è§£

## 1. æ•°æ®æºè¯´æ˜
# ç³»ç»Ÿæ²¡æœ‰ä¸“é—¨çš„çŠ¶æ€è¡¨ï¼Œè€Œæ˜¯é€šè¿‡ä»¥ä¸‹æ•°æ®å®æ—¶è®¡ç®—ï¼š
# - venueè¡¨ï¼šåœºåœ°åŸºç¡€ä¿¡æ¯ï¼ˆid=1çš„åœºåœ°æ˜¯å¦å¯ç”¨ï¼‰
# - reservation_orderè¡¨ï¼šé¢„çº¦è®°å½•ï¼ˆå“ªäº›æ—¶æ®µè¢«é¢„çº¦äº†ï¼‰
# - special_date_configè¡¨ï¼šç‰¹æ®Šæ—¥æœŸé…ç½®ï¼ˆèŠ‚å‡æ—¥ã€ç»´æŠ¤ç­‰ï¼‰

ğŸ¨ å‰ç«¯çŠ¶æ€æ˜ å°„
// ä¼˜å…ˆçº§ä»é«˜åˆ°ä½ï¼š
1. åœºåœ°ç»´æŠ¤çŠ¶æ€ (venue.status != 1) â†’ status=4 ç»´æŠ¤ä¸­
2. ç‰¹æ®Šæ—¥æœŸé…ç½® â†’ æŒ‰é…ç½®è¿”å›çŠ¶æ€  
3. é¢„çº¦è®°å½•å†²çª â†’ status=3 å·²é¢„çº¦
4. é»˜è®¤ä¸šåŠ¡è§„åˆ™ â†’ status=2 ä½¿ç”¨ä¸­ æˆ– status=1 ç©ºé—²ä¸­

## 2. æŸ¥è¯¢æŸæ—¥æœŸæ‰€æœ‰åœºåœ°çŠ¶æ€çŸ©é˜µ
GET http://localhost:8080/api/venue/status-matrix?date=2024-12-25
Accept: application/json

### è¿”å›æ•°æ®ç»“æ„è§£æï¼š
/*
{
  "code": 0,
  "msg": "æˆåŠŸ", 
  "data": {
    "date": "2024-12-25",
    "venues": [
      {
        "id": 1,
        "name": "ç¾½æ¯›çƒåœº1å·",
        "location": "ä½“è‚²é¦†1æ¥¼",
        "pricePerHour": 30.00,
        "isAvailable": true  // åœºåœ°åŸºç¡€çŠ¶æ€ï¼šä»venue.statuså­—æ®µè®¡ç®—
      }
    ],
    "timeSlots": [
      "08:00-09:00", "09:00-10:00", "10:00-11:00", 
      "18:00-19:00", "19:00-20:00", "20:00-21:00"
    ],
    "statusMatrix": {
      "1": {  // åœºåœ°IDä¸ºkey
        "08:00-09:00": {
          "status": 2,           // çŠ¶æ€ç ï¼š1-ç©ºé—²ï¼Œ2-ä½¿ç”¨ä¸­ï¼Œ3-å·²é¢„çº¦ï¼Œ4-ç»´æŠ¤
          "statusDesc": "ä½¿ç”¨ä¸­", // çŠ¶æ€æè¿°
          "bookable": false,     // æ˜¯å¦å¯é¢„çº¦
          "reason": "æ•™å­¦æ—¶é—´"    // çŠ¶æ€åŸå› 
        },
        "19:00-20:00": {
          "status": 3,
          "statusDesc": "å·²é¢„çº¦",
          "bookable": false,
          "reason": "ç”¨æˆ·å¼ ä¸‰é¢„çº¦",
          "reservationId": 12345,  // é¢„çº¦è®¢å•ID
          "username": "å¼ ä¸‰"       // é¢„çº¦ç”¨æˆ·
        },
        "20:00-21:00": {
          "status": 1,
          "statusDesc": "ç©ºé—²ä¸­",
          "bookable": true,
          "reason": null
        }
      }
    }
  }
}
*/

## 3. çŠ¶æ€è®¡ç®—çš„ä¼˜å…ˆçº§å’Œé€»è¾‘

### 3.1 æ£€æŸ¥åœºåœ°åŸºç¡€çŠ¶æ€ï¼ˆæœ€é«˜ä¼˜å…ˆçº§ï¼‰
# å¦‚æœvenue.status != 1ï¼ˆå¯ç”¨ï¼‰ï¼Œåˆ™æ‰€æœ‰æ—¶æ®µéƒ½æ˜¯ç»´æŠ¤ä¸­
# SQL: SELECT status FROM venue WHERE id = 1
# å¦‚æœstatus = 0ï¼Œåˆ™è¿”å›ï¼š
# {
#   "status": 4,
#   "statusDesc": "ç»´æŠ¤ä¸­", 
#   "bookable": false,
#   "reason": "åœºåœ°ç»´æŠ¤"
# }

### 3.2 æ£€æŸ¥ç‰¹æ®Šæ—¥æœŸé…ç½®ï¼ˆç¬¬äºŒä¼˜å…ˆçº§ï¼‰
# SQL: SELECT * FROM special_date_config WHERE special_date = '2024-12-25' AND enabled = 1
# å¦‚æœæœ‰åŒ¹é…çš„é…ç½®ï¼ŒæŒ‰é…ç½®è¿”å›çŠ¶æ€

### 3.3 æ£€æŸ¥é¢„çº¦è®°å½•ï¼ˆç¬¬ä¸‰ä¼˜å…ˆçº§ï¼‰
# SQL: SELECT * FROM reservation_order 
#      WHERE venue_id = 1 AND reservation_date = '2024-12-25' 
#      AND status IN (1,2,3) -- å¾…æ”¯ä»˜ã€å·²æ”¯ä»˜ã€å·²å®Œæˆ
#      AND NOT (end_time <= '19:00' OR start_time >= '20:00')
# å¦‚æœæœ‰å†²çªè®°å½•ï¼Œè¿”å›ï¼š
# {
#   "status": 3,
#   "statusDesc": "å·²é¢„çº¦",
#   "bookable": false, 
#   "reason": "ç”¨æˆ·å¼ ä¸‰é¢„çº¦",
#   "reservationId": 12345,
#   "username": "å¼ ä¸‰"
# }

### 3.4 åº”ç”¨é»˜è®¤ä¸šåŠ¡è§„åˆ™ï¼ˆæœ€ä½ä¼˜å…ˆçº§ï¼‰
# å·¥ä½œæ—¥08:00-18:00 = æ•™å­¦æ—¶é—´ï¼ˆstatus=2ï¼Œä¸å¯é¢„çº¦ï¼‰
# å…¶ä»–æ—¶é—´ = ç©ºé—²ä¸­ï¼ˆstatus=1ï¼Œå¯é¢„çº¦ï¼‰

## 4. å‰ç«¯çŠ¶æ€æ˜ å°„å’Œæ˜¾ç¤º

### 4.1 çŠ¶æ€ç æ˜ å°„
/*
const STATUS_MAP = {
  1: { name: 'ç©ºé—²ä¸­', color: '#52c41a', bookable: true },   // ç»¿è‰²
  2: { name: 'ä½¿ç”¨ä¸­', color: '#faad14', bookable: false },  // é»„è‰²  
  3: { name: 'å·²é¢„çº¦', color: '#f5222d', bookable: false },  // çº¢è‰²
  4: { name: 'ç»´æŠ¤ä¸­', color: '#d9d9d9', bookable: false }   // ç°è‰²
};

function renderVenueMatrix(data) {
  const { venues, timeSlots, statusMatrix } = data;
  
  venues.forEach(venue => {
    timeSlots.forEach(timeSlot => {
      const slotStatus = statusMatrix[venue.id][timeSlot];
      const statusInfo = STATUS_MAP[slotStatus.status];
      
      // æ¸²æŸ“å•å…ƒæ ¼
      const cell = document.getElementById(`venue-${venue.id}-${timeSlot}`);
      cell.style.backgroundColor = statusInfo.color;
      cell.textContent = statusInfo.name;
      cell.disabled = !statusInfo.bookable;
      
      // æ·»åŠ è¯¦ç»†ä¿¡æ¯
      if (slotStatus.reason) {
        cell.title = slotStatus.reason;
      }
      
      // é¢„çº¦æŒ‰é’®çŠ¶æ€
      if (statusInfo.bookable) {
        cell.onclick = () => bookVenue(venue.id, timeSlot);
      }
    });
  });
}
*/

## 5. æŸ¥è¯¢ç‰¹å®šæ—¶é—´æ®µçš„å¯ç”¨åœºåœ°
GET http://localhost:8080/api/venue/availability?date=2024-12-25&startTime=19:00&endTime=20:00
Accept: application/json

### è¿”å›å¯ç”¨å’Œä¸å¯ç”¨åœºåœ°åˆ—è¡¨ï¼š
/*
{
  "code": 0,
  "data": {
    "date": "2024-12-25",
    "timeSlot": "19:00-20:00",
    "totalVenues": 5,
    "totalAvailable": 3,
    "availableVenues": [
      {
        "id": 2,
        "name": "ç¾½æ¯›çƒåœº2å·", 
        "pricePerHour": 35.00,
        "isRecommended": true,
        "recommendReason": "ä»·æ ¼ä¼˜æƒ ã€å‘¨æœ«å¯ç”¨"
      }
    ],
    "unavailableVenues": [
      {
        "id": 1,
        "name": "ç¾½æ¯›çƒåœº1å·",
        "unavailableReason": "è¯¥æ—¶é—´æ®µå·²è¢«ç”¨æˆ·å¼ ä¸‰é¢„çº¦",
        "status": 3,
        "statusDesc": "å·²é¢„çº¦"
      }
    ]
  }
}
*/

## 6. å®é™…çš„æ•°æ®åº“æŸ¥è¯¢è¿‡ç¨‹

### 6.1 è·å–åœºåœ°åˆ—è¡¨
# SELECT id, name, location, price_per_hour, status FROM venue WHERE status = 1

### 6.2 è·å–é¢„çº¦è®°å½•  
# SELECT * FROM reservation_order 
# WHERE venue_id IN (1,2,3,4,5) 
# AND reservation_date = '2024-12-25'
# AND status IN (1,2,3)

### 6.3 è·å–ç‰¹æ®Šé…ç½®
# SELECT * FROM special_date_config 
# WHERE special_date = '2024-12-25' 
# AND enabled = 1

### 6.4 åœ¨Javaä»£ç ä¸­è®¡ç®—æ¯ä¸ªæ—¶é—´æ®µçŠ¶æ€
# éå†æ¯ä¸ªåœºåœ°çš„æ¯ä¸ªæ—¶é—´æ®µï¼ŒæŒ‰ä¼˜å…ˆçº§æ£€æŸ¥ï¼š
# 1. åœºåœ°æ˜¯å¦ç»´æŠ¤ â†’ status=4
# 2. æ˜¯å¦æœ‰ç‰¹æ®Šé…ç½® â†’ æŒ‰é…ç½®è¿”å›
# 3. æ˜¯å¦æœ‰é¢„çº¦å†²çª â†’ status=3  
# 4. æ˜¯å¦æ•™å­¦æ—¶é—´ â†’ status=2
# 5. é»˜è®¤ç©ºé—² â†’ status=1

## 7. å…³é”®ç†è§£ç‚¹

### 7.1 æ²¡æœ‰çŠ¶æ€è¡¨çš„ä¼˜åŠ¿
# âœ… æ•°æ®ä¸€è‡´æ€§ï¼šçŠ¶æ€æ€»æ˜¯åŸºäºæœ€æ–°çš„é¢„çº¦è®°å½•è®¡ç®—
# âœ… ç®€åŒ–ç»´æŠ¤ï¼šä¸éœ€è¦åŒæ­¥å¤šä¸ªè¡¨çš„çŠ¶æ€
# âœ… çµæ´»æ€§ï¼šå¯ä»¥è½»æ¾ä¿®æ”¹ä¸šåŠ¡è§„åˆ™

### 7.2 å®æ—¶è®¡ç®—çš„æˆæœ¬
# âš ï¸ æ¯æ¬¡æŸ¥è¯¢éƒ½éœ€è¦è®¡ç®—
# âš ï¸ å¤æ‚æŸ¥è¯¢å¯èƒ½å½±å“æ€§èƒ½
# âœ… é€šè¿‡æ‚²è§‚é”è§£å†³å¹¶å‘é—®é¢˜

### 7.3 å‰ç«¯ç¼“å­˜ç­–ç•¥
# ğŸ“± çŠ¶æ€çŸ©é˜µå¯ç¼“å­˜30-60ç§’
# ğŸ”„ é¢„çº¦å‰å¿…é¡»å®æ—¶æ£€æŸ¥
# ğŸ¯ ç”¨æˆ·æ“ä½œæ—¶ç«‹å³åˆ·æ–° 